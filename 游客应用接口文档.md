# ğŸš€ **æ¸¸å®¢å°ç¨‹åºé¡¹ç›® â€“ API æ¥å£æ–‡æ¡£ï¼ˆåˆç‰ˆï¼‰**

**ç‰ˆæœ¬ï¼šV1.0**
**æ–‡æ¡£ç›®çš„ï¼š**
åŸºäºç”¨ä¾‹æ–‡æ¡£ç”Ÿæˆåç«¯æ¥å£åˆ—è¡¨ï¼Œä¾›å¼€å‘ã€å‰åç«¯è”è°ƒã€æµ‹è¯•ä½¿ç”¨ã€‚
**æ¥å£é£æ ¼ï¼š** RESTful + Token é‰´æƒ
**è¿”å›æ ¼å¼ï¼š** JSON
**è®¤è¯æœºåˆ¶ï¼š** Bearer Tokenï¼ˆç™»å½•åè·å¾—ï¼‰

ç»Ÿä¸€å‰ç¼€ï¼šapi/v1
---

# ğŸ“Œ **ç›®å½•**

### **A. é‰´æƒä¸ç”¨æˆ·è´¦æˆ·ï¼ˆUC-001 ç™»å½•/æ³¨å†Œï¼‰**


1. POST /auth/register
2. POST /auth/login
3. GET /auth/profile

### **B. æ™¯åŒºä¸æ™¯ç‚¹ä¿¡æ¯ï¼ˆUC-101ï¼‰**

4. GET /zones
5. GET /spots
6. GET /spots/{id}

### **C. åœ°å›¾æ‰“å¡ï¼ˆUC-102ï¼‰**

7. GET /checkin/spots
8. POST /checkin/submit

### **D. åŠ¨æ€æµä¸ç‚¹èµï¼ˆUC-103ï¼‰**

9. GET /feeds
10. POST /feeds/{id}/like
11. DELETE /feeds/{id}/like

### **E. æ™ºèƒ½é—®ç­”ï¼ˆUC-104ï¼‰**

12. POST /assistant/ask

### **F. æ’è¡Œæ¦œï¼ˆUC-105ï¼‰**

13. GET /rankings

### **G. é™„è¿‘æ¨èï¼ˆUC-106ï¼‰**

14. GET /recommend/nearby

### **H. ä¸ªäººä¸­å¿ƒï¼ˆUC-107ï¼‰**

15. GET /user/checkins
16. GET /user/points
17. GET /user/gifts
18. PUT /user/profile

### **I. ç®¡ç†åå°ï¼ˆUC-201ï½UC-205ï¼‰**

19. ç®¡ç†å‘˜æ³¨å†Œ 
    POST /admin/auth/register
20. ç®¡ç†å‘˜ç™»å½• 
    POST /admin/auth/login

---

21. æ™¯åŒº/æ™¯ç‚¹ç®¡ç†æ¥å£
    Â Â Â Â GET /admin/spots
    Â Â Â Â GET /admin/spots/{spotId}
    Â Â Â Â POST /admin/spots
    Â Â Â Â PUT /admin/spots/{spotId}
    Â Â Â Â DELETE /admin/spots/{spotId}

22. æ‰“å¡ç‚¹ç®¡ç†æ¥å£
    Â Â Â Â GET /admin/checkpoints
    Â Â Â Â GET /admin/checkpoints/{pointId}
    Â Â Â Â POST /admin/checkpoints
    Â Â Â Â PUT /admin/checkpoints/{pointId}
    Â Â Â Â DELETE /admin/checkpoints/{pointId}

23. ç§¯åˆ†ç®¡ç†æ¥å£
    Â Â Â Â GET /admin/points/rules
    Â Â Â Â POST /admin/points/rules
        PUT /admin/points/rules/{ruleId}
        DELETE /admin/points/rules/{ruleId}
        GET /admin/points/users/{userId}/logs

24. ç¤¼å“ç®¡ç†æ¥å£
    Â Â Â Â GET /admin/gifts
    Â Â Â Â GET /admin/gifts/{giftId}
    Â Â Â Â POST /admin/gifts
    Â Â Â Â PUT /admin/gifts/{giftId}
    Â Â Â Â DELETE /admin/gifts/{giftId}
    Â Â Â Â PATCH /admin/gifts/{giftId}/stock
    Â Â Â Â GET /admin/gifts/{giftId}/redeems

25. ç”¨æˆ·ç®¡ç†æ¥å£
    Â Â Â Â GET /admin/users
    Â Â Â Â GET /admin/users/{userId}
    Â Â Â Â PUT /admin/users/{userId}
    Â Â Â Â DELETE /admin/users/{userId}



### **J. å•†å®¶æ ¸é”€ç«¯ï¼ˆUC-301ï½UC-302ï¼‰**

26. POST /merchant/verify
27. GET /merchant/stats

---

# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

# ğŸ…° A. ç™»å½•/æ³¨å†Œ APIï¼ˆUC-001ï¼‰

---

## **1. æ³¨å†Œæ¥å£**

### **POST /auth/register**

**æè¿°ï¼š** ç”¨æˆ·ä½¿ç”¨è´¦å·å¯†ç æ³¨å†Œè´¦å·
**Bodyï¼š**

```json
{
  "username": "test123",
  "password": "123456",
  "email": "xx@email.com"
}
```
| å­—æ®µå      | ç±»å‹     | å¿…å¡« | è¯´æ˜           |
| -------- | ------ | -- | ------------ |
| username | string | æ˜¯  | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼Œä¸å¯é‡å¤ï¼‰ |
| password | string | æ˜¯  | å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰     |
| email    | string | æ˜¯  | é‚®ç®±ï¼Œå¯ç”¨äºæ‰¾å›å¯†ç    |

**Responseï¼š**

```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1001,
    "token": "xxxxx.yyyyy.zzzzz",
    "expiresIn": 7200
  }
}
```
```json
{
  "code": 1001,
  "message": "ç”¨æˆ·åå·²è¢«æ³¨å†Œ",
  "data": null
}
```
```json
{
  "code": 1002,
  "message": "å¯†ç å¿…é¡»è‡³å°‘6ä½",
  "data": null
}
```
```json
{
  "code": 1000,
  "message": "å‚æ•°æ ¡éªŒå¤±è´¥,é‚®ç®±æ ¼å¼ä¸æ­£ç¡®",
  "data": null
}

```

---

## **2. ç™»å½•æ¥å£**

### **POST /auth/login**

**Bodyï¼š**

```json
{
  "username": "test123",
  "password": "123456"
}
```
| å­—æ®µå      | ç±»å‹     | å¿…å¡« | è¯´æ˜  |
| -------- | ------ | -- | --- |
| username | string | æ˜¯  | ç”¨æˆ·å |
| password | string | æ˜¯  | å¯†ç   |

**Responseï¼š**

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "userId": 1001,
    "token": "xxxxx.yyyyy.zzzzz",
    "expiresIn": 7200
  }
}

```
```json


```
```json
{
  "code": 1101,
  "message": "è´¦å·ä¸å­˜åœ¨",
  "data": null
}

```
```json
{
  "code": 1102,
  "message": "å¯†ç é”™è¯¯",
  "data": null
}


```

---

## **3. è·å–ç”¨æˆ·èµ„æ–™**

### **GET /auth/profile**

| å­—æ®µå            | ç±»å‹         | æ˜¯å¦å¿…å¡« | è¯´æ˜            |
| -------------- | ---------- | ---- | ------------- |
| userId         | int        | æ˜¯    | ç”¨æˆ·ID          |
| username       | string     | æ˜¯    | ç”¨æˆ·å           |
|nickname|string|å¦|ç”¨æˆ·æ˜µç§°ï¼Œé»˜è®¤ä¸usernameä¸€æ ·|
| avatar         | string     | å¦    | ç”¨æˆ·å¤´åƒ          |
| points         | int        | æ˜¯    | ç”¨æˆ·ç§¯åˆ†          |
| checkinCount   | int        | æ˜¯    | ç”¨æˆ·ç´¯è®¡æ‰“å¡æ¬¡æ•°      |
| isMerchant     | string   | æ˜¯    | æ˜¯å¦ä¸ºå•†å®¶ï¼ŒN=å¦ï¼ŒY=æ˜¯ |
| checkinSpotIds | array[int] | æ˜¯    | ç”¨æˆ·å·²æ‰“å¡çš„æ™¯ç‚¹IDåˆ—è¡¨  |
|email|string|æ˜¯|æ¸¸å®¢é‚®ç®±|




**Responseï¼š**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": 1001,
    "username": "test123",
    "avatar": "https://example.com/avatar.jpg",
    "points": 3200,
    "checkinCount": 15,
    "isMerchant": "N",
    "checkinSpotIds": [11, 22, 35, 41]
  }
}


```

---

# â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

# ğŸ…± B. æ™¯åŒº/æ™¯ç‚¹ä¿¡æ¯ APIï¼ˆUC-101ï¼‰

---

## **4. è·å–å¼•é¢†åŒºä¿¡æ¯**

### **GET /zones**

**Responseï¼š**
| å­—æ®µ          | ç±»å‹            | è¯´æ˜    |
| ----------- | ------------- | ----- |
| zoneId      | int           | å¼•é¢†åŒºID |
| name        | string        | å¼•é¢†åŒºåç§° |
| description | string        | åŒºåŸŸç®€ä»‹  |
| banner      | array(string) | è½®æ’­å›¾é“¾æ¥ |

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "zoneId": 1,
      "name": "ä¸»é¢˜å¼•é¢†åŒº",
      "description": "å±•ç¤ºå›­åŒºå†å²ä¸æ–‡åŒ–ç‰¹è‰²ã€‚",
      "banner": [
        "https://example.com/banner1.jpg",
        "https://example.com/banner2.jpg"
      ]
    },
    {
      "zoneId": 2,
      "name": "ç”Ÿæ€ä½“éªŒåŒº",
      "description": "ä»¥è‡ªç„¶é£å…‰ä¸ç”Ÿæ€ç§‘æ™®ä¸ºä¸»ã€‚",
      "banner": []
    }
  ]
}

```
``` json
{
  "code": 2001,
  "message": "è·å–å¼•é¢†åŒºä¿¡æ¯å¤±è´¥",
  "data": null
}

```
---

## **5. è·å–æ™¯ç‚¹åˆ—è¡¨**

### **GET /spots?zoneId={zoneId}**
| å‚æ•°å      | ç±»å‹     | å¿…å¡« | è¯´æ˜                                          |
| -------- | ------ | -- | ------------------------------------------- |
| zoneId   | int    | å¦  | æŒ‰å¼•é¢†åŒºç­›é€‰                                      |
| type     | string | å¦  | ç±»å‹ï¼š`spot`ï¼ˆæ™¯ç‚¹ï¼‰ã€`trail`ï¼ˆè·¯çº¿ï¼‰ã€`restaurant`ï¼ˆé¤é¥®ï¼‰ç­‰ |
| keyword  | string | å¦  | æœç´¢å…³é”®è¯                                       |
| page     | int    | å¦  | é¡µç ï¼ˆé»˜è®¤ 1ï¼‰                                    |


**Responseï¼š**

| å­—æ®µ        | ç±»å‹     | è¯´æ˜            |
| --------- | ------ | ------------- |
| spotId    | int    | æ™¯ç‚¹ID          |
| name      | string | æ™¯ç‚¹åç§°          |
| thumbnail | string | åˆ—è¡¨ç¼©ç•¥å›¾         |
| summary   | string | ç®€è¦ä»‹ç»          |
| zoneId    | int    | æ‰€å±å¼•é¢†åŒº         |
| distance  | int    | è·ç¦»ç”¨æˆ·çš„ç±³æ•°ï¼ˆè‹¥ä¼ å®šä½ï¼‰ |
| total     | int    | æ€»è®°å½•æ•°          |

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "spotId": 101,
        "name": "ç€‘å¸ƒè§‚æ™¯å°",
        "thumbnail": "https://example.com/spot101.jpg",
        "summary": "ä½“éªŒå£®è§‚çš„è‡ªç„¶ç€‘å¸ƒé£æ™¯ã€‚",
        "zoneId": 1,
        "distance": 320
      },
      {
        "spotId": 102,
        "name": "ç»ç’ƒæ ˆé“",
        "thumbnail": "https://example.com/spot102.jpg",
        "summary": "æƒŠé™©åˆºæ¿€çš„ç½‘çº¢æ™¯ç‚¹ã€‚",
        "zoneId": 1,
        "distance": 450
      }
    ],
    "page": 1,
    "pageSize": 10,
    "total": 25
  }
}
```



---

## **6. è·å–æ™¯ç‚¹è¯¦æƒ…**

### **GET /spots/{id}**

| å‚æ•°å | ç±»å‹  | å¿…å¡« | è¯´æ˜   |
| --- | --- | -- | ---- |
| id  | int | æ˜¯  | æ™¯ç‚¹ID |

**Responseï¼š**
| å­—æ®µ                   | ç±»å‹            | è¯´æ˜      |
| -------------------- | ------------- | ------- |
| spotId               | int           | æ™¯ç‚¹ID    |
| name                 | string        | æ™¯ç‚¹åç§°    |
| images               | array(string) | å¤šå¼ å±•ç¤ºå›¾   |
| video                | string        | æ™¯ç‚¹ä»‹ç»è§†é¢‘  |
| description          | string        | è¯¦ç»†è¯´æ˜    |
| zoneId               | int           | æ‰€å±å¼•é¢†åŒº   |
| latitude / longitude | float         | åœ°ç†ä½ç½®    |
| openTime             | string        | è¥ä¸šæˆ–å¼€æ”¾æ—¶é—´ |

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "spotId": 101,
    "name": "ç€‘å¸ƒè§‚æ™¯å°",
    "images": [
      "https://example.com/spot101_1.jpg",
      "https://example.com/spot101_2.jpg"
    ],
    "video": "https://example.com/spot101_video.mp4",
    "description": "ç€‘å¸ƒè§‚æ™¯å°æ˜¯å›­åŒºæœ€å£®è§‚çš„è‡ªç„¶æ™¯ç‚¹ä¹‹ä¸€â€¦â€¦",
    "zoneId": 1,
    "latitude": 23.334450,
    "longitude": 113.334001,
    "openTime": "09:00-18:00",
  }
}

```
``` json
{
  "code": 2201,
  "message": "æ™¯ç‚¹ä¸å­˜åœ¨",
  "data": null
}

```

``` json
{
  "code": 2202,
  "message": "è·å–æ™¯ç‚¹è¯¦æƒ…å¤±è´¥",
  "data": null
}

```

---

# # ğŸ…’ åœ°å›¾æ‰“å¡ APIï¼ˆUC-102ï¼‰

---

# ## 7. è·å–æ‰€æœ‰æ‰“å¡ç‚¹ä½

### **GET /checkin/spots**

### **æè¿°**

è·å–åœ°å›¾ä¸Šçš„æ‰€æœ‰æ‰“å¡ç‚¹ï¼ŒåŒ…å«ç‚¹ä½åæ ‡ã€æ‰“å¡èŒƒå›´ï¼ˆåŠå¾„èŒƒå›´åˆ¤æ–­ï¼‰ç­‰ä¿¡æ¯ã€‚
å‰ç«¯ç”¨äºæ¸²æŸ“åœ°å›¾è¦†ç›–ç‰©ã€åˆ¤æ–­ç”¨æˆ·è¿‘æœŸå¯æ‰“å¡ç‚¹ä½ã€‚

---

### **è¯·æ±‚å‚æ•°**

| å‚æ•°å  | ç±»å‹     | å¿…å¡« | è¯´æ˜                           |
| ---- | ------ | -- | ---------------------------- |
| lat  | float  | å¦  | å½“å‰ç”¨æˆ·çº¬åº¦ï¼ˆç”¨äºè·ç¦»æ’åºï¼‰               |
| lng  | float  | å¦  | å½“å‰ç”¨æˆ·ç»åº¦                       |
| sort | string | å¦  | æ’åºæ–¹å¼ï¼š`distance`ï¼ˆæŒ‰è·ç¦»å‡åºï¼‰ï¼Œé»˜è®¤ä¸æ’åº |

---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /checkin/spots?lat=23.11&lng=113.33&sort=distance
```

---

### **æˆåŠŸè¿”å›ï¼ˆ200 OKï¼‰**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "spotId": 301,
      "name": "å±±é¡¶è§‚æ™¯å°",
      "latitude": 23.112233,
      "longitude": 113.332211,
      "radius": 100,
      "thumbnail": "https://example.com/spot301.jpg",
      "distance": 85
    },
    {
      "spotId": 302,
      "name": "æ¹–ç•”æ ˆé“",
      "latitude": 23.115566,
      "longitude": 113.334455,
      "radius": 120,
      "thumbnail": "https://example.com/spot302.jpg",
      "distance": 320
    }
  ]
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ                   | ç±»å‹     | è¯´æ˜              |
| -------------------- | ------ | --------------- |
| spotId               | int    | æ‰“å¡ç‚¹ID           |
| name                 | string | æ‰“å¡ç‚¹åç§°           |
| latitude / longitude | float  | åæ ‡ä½ç½®            |
| radius               | int    | æ‰“å¡æœ‰æ•ˆåŠå¾„èŒƒå›´ï¼ˆå•ä½ï¼šç±³ï¼‰  |
| thumbnail            | string | ç‚¹ä½ç¼©ç•¥å›¾           |
| distance             | int    | ç”¨æˆ·è·ç¦»è¯¥ç‚¹çš„è·ç¦»ï¼ˆå•ä½ï¼šç±³ï¼‰ |

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 3001,
  "message": "è·å–æ‰“å¡ç‚¹å¤±è´¥",
  "data": null
}
```

---

---

# ## 8. æäº¤æ‰“å¡

### **POST /checkin/submit**

### **æè¿°**

ç”¨æˆ·åˆ°è¾¾ç‚¹ä½åæäº¤æ‰“å¡è®°å½•ï¼Œåç«¯éªŒè¯å®šä½ã€è·ç¦»èŒƒå›´åŠæäº¤ææ–™ï¼ˆå¦‚ç…§ç‰‡ï¼‰ã€‚
æˆåŠŸåå¯è¿”å›è·å¾—ç§¯åˆ†ã€æ‰“å¡çŠ¶æ€ç­‰ä¿¡æ¯ã€‚

---

### **è¯·æ±‚å¤´ï¼ˆHeadersï¼‰**

| Header        | ç¤ºä¾‹                       | å¿…å¡« | è¯´æ˜       |
| ------------- | ------------------------ | -- | -------- |
| Authorization | Bearer xxxxx.yyyyy.zzzzz | æ˜¯  | ç”¨æˆ· Token |

---

### **è¯·æ±‚å‚æ•°ï¼ˆRequest Bodyï¼‰**

```json
{
  "spotId": 301,
  "latitude": 23.112300,
  "longitude": 113.332200,
  "image": "base64_encoded_image"
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ        | ç±»å‹     | å¿…å¡« | è¯´æ˜             |
| --------- | ------ | -- | -------------- |
| spotId    | int    | æ˜¯  | æ‰“å¡ç‚¹ID          |
| latitude  | float  | æ˜¯  | ç”¨æˆ·å½“å‰ä½ç½®çº¬åº¦       |
| longitude | float  | æ˜¯  | ç”¨æˆ·å½“å‰ä½ç½®ç»åº¦       |
| image     | string | å¦  | ä¸Šä¼ ç…§ç‰‡ï¼ˆBase64ç¼–ç ï¼‰ |

---

### **æˆåŠŸè¿”å›ï¼ˆ200 OKï¼‰**

```json
{
  "code": 200,
  "message": "æ‰“å¡æˆåŠŸ",
  "data": {
    "checkinId": 50011,
    "points": 100,
    "spotId": 301,
    "checkinTime": "2025-01-11 14:20:33",
    "message": "æ­å–œå®Œæˆæ‰“å¡ï¼è·å¾— 100 ç§¯åˆ†"
  }
}
```

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

#### 1ï¼‰ä¸åœ¨æ‰“å¡èŒƒå›´å†…

```json
{
  "code": 3101,
  "message": "æœªåœ¨æ‰“å¡èŒƒå›´å†…ï¼Œè¯·é è¿‘åé‡è¯•",
  "data": {
    "distance": 85
  }
}
```

#### 2ï¼‰é‡å¤æ‰“å¡ï¼ˆå½“å¤©/è§„åˆ™é™åˆ¶ï¼‰

```json
{
  "code": 3102,
  "message": "ä»Šæ—¥å·²æ‰“å¡ï¼Œè¯·æ˜å¤©å†æ¥",
  "data": null
}
```

#### 3ï¼‰ç…§ç‰‡æ ¼å¼é”™è¯¯

```json
{
  "code": 3103,
  "message": "å›¾ç‰‡æ ¼å¼ä¸æ­£ç¡®",
  "data": null
}
```

#### 4ï¼‰æœªç™»å½•

```json
{
  "code": 1201,
  "message": "æœªæˆæƒçš„è®¿é—®ï¼Œè¯·å…ˆç™»å½•",
  "data": null
}
```

#### 5ï¼‰æœåŠ¡å™¨å¼‚å¸¸

```json
{
  "code": 9999,
  "message": "æœåŠ¡å™¨å¼‚å¸¸",
  "data": null
}
```

---

---

# # ğŸ…“ åŠ¨æ€æµä¸ç‚¹èµ APIï¼ˆUC-103ï¼‰

---

# ## 9. è·å–åŠ¨æ€åˆ—è¡¨

### **GET /feeds**

### **æè¿°**

è·å–ç”¨æˆ·æ‰“å¡æˆ–å…¶ä»–æ¸¸å®¢å‘å¸ƒçš„åŠ¨æ€åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€è¿‡æ»¤å’Œæ’åºã€‚

---

### **è¯·æ±‚å‚æ•°**

| å‚æ•°å      | ç±»å‹     | å¿…å¡« | è¯´æ˜                              |
| -------- | ------ | -- | ------------------------------- |
| page     | int    | å¦  | é¡µç ï¼Œé»˜è®¤ 1                         |
| pageSize | int    | å¦  | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 10                      |
| sort     | string | å¦  | æ’åºæ–¹å¼ï¼š`latest`ï¼ˆæœ€æ–°ï¼‰ã€`popular`ï¼ˆçƒ­é—¨ï¼‰ |
| userId   | int    | å¦  | å¯é€‰ï¼ŒæŸ¥çœ‹æŒ‡å®šç”¨æˆ·åŠ¨æ€                     |
| keyword  | string | å¦  | å¯é€‰ï¼ŒæŒ‰å…³é”®è¯æœç´¢åŠ¨æ€å†…å®¹                   |

---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /feeds?page=1&pageSize=10&sort=latest
```

---

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "feedId": 1001,
        "userId": 2001,
        "username": "æ¸¸å®¢å°æ˜",
        "avatar": "https://example.com/avatar2001.jpg",
        "spotId": 301,
        "spotName": "å±±é¡¶è§‚æ™¯å°",
        "content": "ä»Šå¤©æ‰“å¡äº†å±±é¡¶è§‚æ™¯å°ï¼Œé£æ™¯å¤ªç¾äº†ï¼",
        "likes": 12,
        "liked": false,
        "createdAt": "2025-01-11 14:20:33"
      }
    ],
    "page": 1,
    "pageSize": 10,
    "total": 25
  }
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ        | ç±»å‹            | è¯´æ˜        |
| --------- | ------------- | --------- |
| feedId    | int           | åŠ¨æ€ID      |
| userId    | int           | å‘å¸ƒåŠ¨æ€çš„ç”¨æˆ·ID |
| username  | string        | ç”¨æˆ·æ˜µç§°      |
| avatar    | string        | ç”¨æˆ·å¤´åƒ      |
| spotId    | int           | æ‰“å¡ç‚¹ID     |
| spotName  | string        | æ‰“å¡ç‚¹åç§°     |
| content   | string        | åŠ¨æ€æ–‡å­—å†…å®¹    |
| likes     | int           | ç‚¹èµæ•°é‡      |
| liked     | boolean       | å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç‚¹èµ |
| createdAt | string        | å‘å¸ƒæ—¶é—´      |

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 3201,
  "message": "è·å–åŠ¨æ€åˆ—è¡¨å¤±è´¥",
  "data": null
}
```

---

# ## 10. ç‚¹èµåŠ¨æ€

### **POST /feeds/{id}/like**

### **æè¿°**

å¯¹æŒ‡å®šåŠ¨æ€è¿›è¡Œç‚¹èµï¼Œæ”¯æŒå³æ—¶æ›´æ–°å‰ç«¯çŠ¶æ€ã€‚

---

### **è·¯å¾„å‚æ•°ï¼ˆPath Paramsï¼‰**

| å‚æ•°å | ç±»å‹  | å¿…å¡« | è¯´æ˜   |
| --- | --- | -- | ---- |
| id  | int | æ˜¯  | åŠ¨æ€ID |


---

### **è¯·æ±‚ç¤ºä¾‹**

```
POST /feeds/1001/like
```

---

### **æˆåŠŸè¿”å›ï¼ˆ200 OKï¼‰**

```json
{
  "code": 200,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "feedId": 1001,
    "likes": 13,
    "liked": true
  }
}
```

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

#### 1ï¼‰åŠ¨æ€ä¸å­˜åœ¨

```json
{
  "code": 3301,
  "message": "åŠ¨æ€ä¸å­˜åœ¨",
  "data": null
}
```

#### 2ï¼‰é‡å¤ç‚¹èµ

```json
{
  "code": 3302,
  "message": "å·²ç‚¹èµè¿‡è¯¥åŠ¨æ€",
  "data": null
}
```

#### 3ï¼‰æœªç™»å½•

```json
{
  "code": 1201,
  "message": "æœªæˆæƒçš„è®¿é—®ï¼Œè¯·å…ˆç™»å½•",
  "data": null
}
```

---

# ## 11. å–æ¶ˆç‚¹èµ

### **DELETE /feeds/{id}/like**

### **æè¿°**

å–æ¶ˆå¯¹æŒ‡å®šåŠ¨æ€çš„ç‚¹èµï¼Œç‚¹èµæ•°å‡1ã€‚

---

### **è·¯å¾„å‚æ•°**

| å‚æ•°å | ç±»å‹  | å¿…å¡« | è¯´æ˜   |
| --- | --- | -- | ---- |
| id  | int | æ˜¯  | åŠ¨æ€ID |


---

### **è¯·æ±‚ç¤ºä¾‹**

```
DELETE /feeds/1001/like
```

---

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "feedId": 1001,
    "likes": 12,
    "liked": false
  }
}
```

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

#### 1ï¼‰åŠ¨æ€ä¸å­˜åœ¨

```json
{
  "code": 3301,
  "message": "åŠ¨æ€ä¸å­˜åœ¨",
  "data": null
}
```

#### 2ï¼‰æœªç‚¹èµ

```json
{
  "code": 3303,
  "message": "è¯¥åŠ¨æ€æœªç‚¹èµï¼Œæ— éœ€å–æ¶ˆ",
  "data": null
}
```

#### 3ï¼‰æœªç™»å½•

```json
{
  "code": 1201,
  "message": "æœªæˆæƒçš„è®¿é—®ï¼Œè¯·å…ˆç™»å½•",
  "data": null
}
```

---

# # ğŸ…” æ™ºèƒ½é—®ç­” APIï¼ˆUC-104ï¼‰

---

# ## 12. æé—®æ™ºèƒ½åŠ©æ‰‹

### **POST /assistant/ask**

### **æè¿°**

æ¸¸å®¢å‘æ™ºèƒ½åŠ©æ‰‹æäº¤è‡ªç„¶è¯­è¨€é—®é¢˜ï¼Œç³»ç»Ÿè°ƒç”¨ LLM ä¸å¤§æ•°æ®æœåŠ¡ç”Ÿæˆä¸ªæ€§åŒ–å›ç­”ã€‚

---

### **è¯·æ±‚å¤´ï¼ˆHeadersï¼‰**

| Header        | ç¤ºä¾‹                       | å¿…å¡« | è¯´æ˜       |
| ------------- | ------------------------ | -- | -------- |
| Authorization | Bearer xxxxx.yyyyy.zzzzz | æ˜¯  | ç”¨æˆ· Token |

---

### **è¯·æ±‚å‚æ•°ï¼ˆRequest Bodyï¼‰**

```json
{
  "question": "é™„è¿‘æœ‰ä»€ä¹ˆé€‚åˆå¸¦å­©å­çš„é¤å…ï¼Ÿ",
  "context": {
    "latitude": 23.112233,
    "longitude": 113.332211,
    "history": [
      "ä»Šå¤©æ‰“å¡äº†å±±é¡¶è§‚æ™¯å°",
      "å–œæ¬¢è‡ªç„¶é£æ™¯å’Œäº²å­è·¯çº¿"
    ]
  }
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ                | ç±»å‹            | å¿…å¡« | è¯´æ˜                  |
| ----------------- | ------------- | -- | ------------------- |
| question          | string        | æ˜¯  | ç”¨æˆ·è‡ªç„¶è¯­è¨€é—®é¢˜            |
| context.latitude  | float         | å¦  | ç”¨æˆ·å½“å‰ä½ç½®çº¬åº¦ï¼ˆç”¨äºæ¨èé™„è¿‘èµ„æºï¼‰  |
| context.longitude | float         | å¦  | ç”¨æˆ·å½“å‰ä½ç½®ç»åº¦            |
| context.history   | array(string) | å¦  | ç”¨æˆ·å†å²æ‰“å¡/é—®ç­”è®°å½•ï¼Œç”¨äºä¸Šä¸‹æ–‡æ¨è |

---

### **æˆåŠŸè¿”å›ï¼ˆ200 OKï¼‰**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "answer": "æ‚¨å¯ä»¥å¸¦å­©å­å»â€œæ¹–ç•”äº²å­é¤å…â€ï¼Œæœ‰å„¿ç«¥æ¸¸ä¹åŒºå’Œå„¿ç«¥èœå•ï¼›æˆ–è€…å»â€œæ£®æ—æ¢é™©é¤å…â€ï¼Œæä¾›äº²å­æ´»åŠ¨ä½“éªŒã€‚",
    "recommendations": [
      {
        "type": "restaurant",
        "id": 401,
        "name": "æ¹–ç•”äº²å­é¤å…",
        "latitude": 23.113000,
        "longitude": 113.333000,
        "distance": 200
      },
      {
        "type": "restaurant",
        "id": 402,
        "name": "æ£®æ—æ¢é™©é¤å…",
        "latitude": 23.114500,
        "longitude": 113.334500,
        "distance": 400
      }
    ]
  }
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ                                   | ç±»å‹     | è¯´æ˜                           |
| ------------------------------------ | ------ | ---------------------------- |
| answer                               | string | æ™ºèƒ½åŠ©æ‰‹ç”Ÿæˆçš„å›ç­”æ–‡æœ¬                  |
| recommendations                      | array  | ç³»ç»Ÿæ¨èçš„ç›¸å…³èµ„æºåˆ—è¡¨                  |
| recommendations.type                 | string | èµ„æºç±»å‹ï¼Œå¦‚ `restaurant`ã€`spot` ç­‰ |
| recommendations.id                   | int    | èµ„æºID                         |
| recommendations.name                 | string | èµ„æºåç§°                         |
| recommendations.latitude / longitude | float  | èµ„æºä½ç½®                         |
| recommendations.distance             | int    | ä¸ç”¨æˆ·å½“å‰ä½ç½®çš„è·ç¦»ï¼ˆç±³ï¼‰                |

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

#### 1ï¼‰é—®é¢˜ä¸ºç©º

```json
{
  "code": 3401,
  "message": "é—®é¢˜ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

#### 2ï¼‰LLMæœåŠ¡æ— å“åº”

```json
{
  "code": 3402,
  "message": "æ™ºèƒ½åŠ©æ‰‹æš‚æ—¶æ— æ³•å“åº”ï¼Œè¯·ç¨åå†è¯•",
  "data": null
}
```

#### 3ï¼‰æœªç™»å½•

```json
{
  "code": 1201,
  "message": "æœªæˆæƒçš„è®¿é—®ï¼Œè¯·å…ˆç™»å½•",
  "data": null
}
```

#### 4ï¼‰å…¶ä»–å¼‚å¸¸

```json
{
  "code": 9999,
  "message": "æœåŠ¡å™¨å¼‚å¸¸",
  "data": null
}
```

---

# # ğŸ…• æ’è¡Œæ¦œ APIï¼ˆUC-105ï¼‰

---

# ## 13. è·å–æ’è¡Œæ¦œ

### **GET /rankings**

### **æè¿°**

è·å–åŸºäºæ‰“å¡æ•°é‡ã€ç‚¹èµæ•°é‡ç­‰ç»¼åˆè®¡ç®—çš„ç”¨æˆ·æ’è¡Œæ¦œï¼Œå¯æŒ‰æ—¶é—´ç»´åº¦ï¼ˆå¦‚æ—¥ã€å‘¨ã€æœˆï¼‰æŸ¥è¯¢ã€‚

---

### **è¯·æ±‚å‚æ•°**

| å‚æ•°å      | ç±»å‹     | å¿…å¡« | è¯´æ˜                                          |
| -------- | ------ | -- | ------------------------------------------- |
| period   | string | å¦  | æ—¶é—´å‘¨æœŸï¼š`daily`ã€`weekly`ã€`monthly`ï¼Œé»˜è®¤ `weekly` |
| page     | int    | å¦  | é¡µç ï¼Œé»˜è®¤ 1                                     |
| sort     | string | å¦  | æ’åºæ–¹å¼ï¼š`points`ï¼ˆç§¯åˆ†/ç»¼åˆåˆ†æ•°ï¼‰ã€`checkins`ï¼ˆæ‰“å¡æ•°é‡ï¼‰     |

---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /rankings?period=weekly&page=1&sort=points
```

---

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "rank": 1,
        "userId": 2001,
        "username": "æ¸¸å®¢å°æ˜",
        "avatar": "https://example.com/avatar2001.jpg",
        "totalCheckins": 25,
        "totalLikes": 120,
        "score": 2450
      },
      {
        "rank": 2,
        "userId": 2002,
        "username": "æ¸¸å®¢å°çº¢",
        "avatar": "https://example.com/avatar2002.jpg",
        "totalCheckins": 20,
        "totalLikes": 98,
        "score": 1980
      }
    ],
    "page": 1,
    "pageSize": 10,
    "total": 50
  }
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ            | ç±»å‹     | è¯´æ˜                  |
| ------------- | ------ | ------------------- |
| rank          | int    | æ’å                  |
| userId        | int    | ç”¨æˆ·ID                |
| username      | string | ç”¨æˆ·æ˜µç§°                |
| avatar        | string | ç”¨æˆ·å¤´åƒ                |
| totalCheckins | int    | æ€»æ‰“å¡æ•°                |
| totalLikes    | int    | æ€»ç‚¹èµæ•°                |
| score         | int    | ç»¼åˆè¯„åˆ†ï¼ˆå¯æŒ‰æ‰“å¡æ•°ã€ç‚¹èµæ•°åŠ æƒè®¡ç®—ï¼‰ |

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 3501,
  "message": "è·å–æ’è¡Œæ¦œå¤±è´¥",
  "data": null
}
```

---

### **æ‰©å±•è¯´æ˜**

1. ç”¨æˆ·ç‚¹å‡»æ’è¡Œæ¦œä¸­çš„æŸä¸€åç”¨æˆ·ï¼Œå¯åœ¨å‰ç«¯è·³è½¬è‡³è¯¥ç”¨æˆ·ä¸ªäººä¸»é¡µï¼ŒæŸ¥çœ‹å…¬å¼€çš„æ‰“å¡åŠ¨æ€ã€‚
2. æ’è¡Œæ¦œè®¡ç®—è§„åˆ™éœ€é˜²ä½œå¼Šï¼Œä¾‹å¦‚åŒä¸€ç‚¹ä½é‡å¤æ‰“å¡ä¸è®¡å…¥æœ‰æ•ˆæ•°é‡ã€‚

---


# # ğŸ…– é™„è¿‘æ¨è APIï¼ˆUC-106ï¼‰

---

# ## 14. è·å–é™„è¿‘æ¨è

### **GET /recommend/nearby**

### **æè¿°**

åŸºäºç”¨æˆ·å½“å‰ä½ç½®å’Œè¡Œä¸ºåå¥½ï¼Œç³»ç»Ÿæ™ºèƒ½æ¨èé™„è¿‘æ™¯ç‚¹æˆ–å•†å®¶ã€‚æ”¯æŒæŒ‰è·ç¦»å’Œçƒ­åº¦æ’åºã€‚

---

### **è¯·æ±‚å‚æ•°ï¼ˆQuery Paramsï¼‰**

| å‚æ•°å       | ç±»å‹     | å¿…å¡« | è¯´æ˜                                                       |
| --------- | ------ | -- | -------------------------------------------------------- |
| latitude  | float  | æ˜¯  | ç”¨æˆ·å½“å‰çº¬åº¦                                                   |
| longitude | float  | æ˜¯  | ç”¨æˆ·å½“å‰ç»åº¦                                                   |
| sort      | string | å¦  | æ’åºæ–¹å¼ï¼š`distance`ï¼ˆè·ç¦»æœ€è¿‘ï¼‰ã€`popularity`ï¼ˆçƒ­åº¦æœ€é«˜ï¼‰ï¼Œé»˜è®¤ `popularity` |
| type      | string | å¦  | æ¨èç±»å‹ï¼š`spot`ï¼ˆæ™¯ç‚¹ï¼‰ã€`merchant`ï¼ˆå•†å®¶ï¼‰ã€`all`ï¼ˆå…¨éƒ¨ï¼‰ï¼Œé»˜è®¤ `all`        |
| page      | int    | å¦  | é¡µç ï¼Œé»˜è®¤ 1                                                  |


---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /recommend/nearby?latitude=23.112233&longitude=113.332211&sort=distance&type=all&page=1
```

---

### **æˆåŠŸè¿”å›ï¼ˆ200 OKï¼‰**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "id": 301,
        "type": "spot",
        "name": "å±±é¡¶è§‚æ™¯å°",
        "latitude": 23.112500,
        "longitude": 113.332500,
        "distance": 150,
        "thumbnail": "https://example.com/spot301.jpg",
        "popularity": 250
      },
      {
        "id": 501,
        "type": "merchant",
        "name": "æ¹–ç•”é¤å…",
        "latitude": 23.113200,
        "longitude": 113.333100,
        "distance": 300,
        "thumbnail": "https://example.com/merchant501.jpg",
        "popularity": 180
      }
    ],
    "page": 1,
    "pageSize": 10,
    "total": 50
  }
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ                   | ç±»å‹     | è¯´æ˜                       |
| -------------------- | ------ | ------------------------ |
| id                   | int    | èµ„æºIDï¼ˆæ™¯ç‚¹æˆ–å•†å®¶ï¼‰              |
| type                 | string | èµ„æºç±»å‹ï¼š`spot` / `merchant` |
| name                 | string | åç§°                       |
| latitude / longitude | float  | ç»çº¬åº¦åæ ‡                    |
| distance             | int    | ä¸ç”¨æˆ·å½“å‰ä½ç½®è·ç¦»ï¼ˆç±³ï¼‰             |
| thumbnail            | string | ç¼©ç•¥å›¾                      |
| popularity           | int    | çƒ­åº¦è¯„åˆ†ï¼ˆå¯æŒ‰æ‰“å¡æ•°ã€æµè§ˆé‡ç­‰è®¡ç®—ï¼‰       |

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

#### 1ï¼‰æœªæä¾›åæ ‡

```json
{
  "code": 3601,
  "message": "ç¼ºå°‘ç”¨æˆ·åæ ‡ä¿¡æ¯",
  "data": null
}
```

#### 2ï¼‰æœåŠ¡å¼‚å¸¸

```json
{
  "code": 9999,
  "message": "æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•",
  "data": null
}
```

---

### **æ‰©å±•è¯´æ˜**

1. è‹¥æ— æ³•è·å–ç”¨æˆ·ä½ç½®ï¼Œå¯è¿”å›é€šç”¨çƒ­é—¨æ¨èåˆ—è¡¨ï¼Œå¹¶åœ¨å‰ç«¯æç¤ºç”¨æˆ·ã€‚
2. æ”¯æŒå‰ç«¯æ’åºã€ç­›é€‰åŠŸèƒ½ï¼Œå¦‚æŒ‰è·ç¦»æˆ–çƒ­åº¦æ’åºã€‚
3. æ¨èç»“æœå¯åŒ…å«æ™¯ç‚¹å’Œå•†å®¶ç±»å‹ï¼Œå‰ç«¯å¯åŒºåˆ†å±•ç¤ºã€‚


---

# # ğŸ…— ä¸ªäººä¸­å¿ƒ APIï¼ˆUC-107ï¼‰

---

# ## 15. è·å–ç”¨æˆ·æ‰“å¡è®°å½•

### **GET /user/checkins**

### **æè¿°**

è·å–ç”¨æˆ·çš„å†å²æ‰“å¡è®°å½•ï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€ç‚¹ä½ä¿¡æ¯ã€æ—¶é—´ç­‰ã€‚


---

### **è¯·æ±‚å‚æ•°**

| å‚æ•°å      | ç±»å‹  | å¿…å¡« | è¯´æ˜         |
| -------- | --- | -- | ---------- |
| page     | int | å¦  | é¡µç ï¼Œé»˜è®¤ 1    |

---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /user/checkins?page=1
```

---

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "checkinId": 1001,
        "spotId": 301,
        "spotName": "å±±é¡¶è§‚æ™¯å°",
        "images": ["https://example.com/checkin1001_1.jpg"],
        "pointsEarned": 100,
        "createdAt": "2025-01-11 14:20:33"
      }
    ],
    "page": 1,
    "total": 25
  }
}
```

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 3701,
  "message": "è·å–æ‰“å¡è®°å½•å¤±è´¥",
  "data": null
}
```

---

# ## 16. è·å–ç”¨æˆ·ç§¯åˆ†è®°å½•

### **GET /user/points**

### **æè¿°**

è·å–ç”¨æˆ·ç§¯åˆ†æ˜ç»†ï¼ŒåŒ…æ‹¬è·å–ã€æ¶ˆè€—å’Œå‰©ä½™ç§¯åˆ†ã€‚


---

---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /user/points
```

---

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "recordId": 5001,
        "type": "earn",
        "source": "æ‰“å¡å±±é¡¶è§‚æ™¯å°",
        "points": 100,
        "createdAt": "2025-01-11 14:20:33"
      },
      {
        "recordId": 5002,
        "type": "spend",
        "source": "å…‘æ¢ç¤¼å“ï¼šçºªå¿µå“",
        "points": -200,
        "createdAt": "2025-01-12 10:15:00"
      }
    ],
    "totalPoints": 850,
    "total": 50
  }
}
```

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 3702,
  "message": "è·å–ç§¯åˆ†è®°å½•å¤±è´¥",
  "data": null
}
```

---

# ## 17. è·å–ç”¨æˆ·ç¤¼å“åˆ—è¡¨

### **GET /user/gifts**

### **æè¿°**

è·å–ç”¨æˆ·å¯å…‘æ¢æˆ–å·²å…‘æ¢çš„ç¤¼å“åˆ—è¡¨ï¼ŒåŒ…æ‹¬çŠ¶æ€å’Œç§¯åˆ†æ¶ˆè€—æƒ…å†µã€‚

---



---

### **è¯·æ±‚å‚æ•°**

| å‚æ•°å      | ç±»å‹     | å¿…å¡« | è¯´æ˜                                             |
| -------- | ------ | -- | ---------------------------------------------- |
| status   | string | å¦  | ç¤¼å“çŠ¶æ€ï¼š`available`ã€`redeemed`ã€`expired`ï¼Œé»˜è®¤ `all` |

---

### **è¯·æ±‚ç¤ºä¾‹**

```
GET /user/gifts?page=1&status=available
```

---

### **æˆåŠŸè¿”å›ï¼ˆ200 OKï¼‰**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "list": [
      {
        "giftId": 601,
        "name": "çºªå¿µå“",
        "pointsRequired": 200,
        "status": "available",
        "redeemedAt": null
      },
      {
        "giftId": 602,
        "name": "ç‰¹è‰²æ‰‹å·¥è‰ºå“",
        "pointsRequired": 300,
        "status": "redeemed",
        "redeemedAt": "2025-01-12 10:20:00"
      }
    ],
    "total": 5
  }
}
```

---

### **å­—æ®µè¯´æ˜**

| å­—æ®µ             | ç±»å‹          | è¯´æ˜                                    |
| -------------- | ----------- | ------------------------------------- |
| giftId         | int         | ç¤¼å“ID                                  |
| name           | string      | ç¤¼å“åç§°                                  |
| pointsRequired | int         | å…‘æ¢æ‰€éœ€ç§¯åˆ†                                |
| status         | string      | ç¤¼å“çŠ¶æ€ï¼š`available`ã€`redeemed`ã€`expired` |
| redeemedAt     | string/null | å·²å…‘æ¢æ—¶é—´ï¼Œæœªå…‘æ¢åˆ™ä¸º null                      |

---

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 3703,
  "message": "è·å–ç¤¼å“åˆ—è¡¨å¤±è´¥",
  "data": null
}
```
---

# ## 18. ä¿®æ”¹ä¸ªäººä¿¡æ¯

### **PUT /user/profile**

### **æè¿°**

ç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„ä¸ªäººä¿¡æ¯ï¼Œå¦‚æ˜µç§°ã€å¤´åƒç­‰ã€‚éœ€è¦ç™»å½•ï¼Œå¿…é¡»åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ Tokenã€‚

---

### **è¯·æ±‚å¤´ï¼ˆHeadersï¼‰**

| Header åç§°     | ç¤ºä¾‹                       | å¿…å¡« | è¯´æ˜           |
| ------------- | ------------------------ | -- | ------------ |
| Authorization | Bearer xxxxx.yyyyy.zzzzz | æ˜¯  | ç™»å½•åè¿”å›çš„ Token |

---

### **è¯·æ±‚å‚æ•°ï¼ˆRequest Bodyï¼‰**

```json
{
  "nickname": "å°æ˜",
  "avatar": "https://example.com/avatar_new.jpg",
  "email":"123@.com"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå      | ç±»å‹     | å¿…å¡« | è¯´æ˜           |
| -------- | ------ | -- | ------------ |
| nickname | string | å¦  | ç”¨æˆ·æ˜µç§°ï¼Œæ›´æ–°åç”¨äºæ˜¾ç¤º |
| avatar   | string | å¦  | ç”¨æˆ·å¤´åƒ URL     |
| email   | string | å¦  | ç”¨æˆ·é‚®ç®±     |


> æ³¨ï¼šå¦‚æœæŸä¸ªå­—æ®µæœªä¼ ï¼Œåˆ™ä¿æŒåŸå€¼ä¸å˜ã€‚

---

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "ä¿®æ”¹æˆåŠŸ",
  "data": {
    "userId": 1001,
    "username": "test123",
    "nickname": "å°æ˜",
    "avatar": "https://example.com/avatar_new.jpg",
    "points": 3200,
    "checkinCount": 15,
    "isMerchant": "N",
    "checkinSpotIds": [11, 22, 35, 41]
  }
}
```

---


#### 1ï¼‰æœªç™»å½•æˆ– Token æ— æ•ˆ

```json
{
  "code": 1202,
  "message": "Token å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•",
  "data": null
}
```

#### 2ï¼‰æ˜µç§°æˆ–å¤´åƒæ ¼å¼ä¸æ­£ç¡®

```json
{
  "code": 1301,
  "message": "æ˜µç§°é•¿åº¦ä¸èƒ½è¶…è¿‡20å­—ç¬¦",
  "data": null
}
```

---

# ## I. ç®¡ç†åå° APIï¼ˆUC-201 ~ UC-205ï¼‰


---

# ## UC-201 æ™¯åŒº/æ™¯ç‚¹ç®¡ç†æ¥å£

### **æ¦‚è¿°**

ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ç™»å½•/æ³¨å†Œï¼Œé€šè¿‡ç®¡ç†åå°å¯¹æ™¯åŒºå’Œæ™¯ç‚¹è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼ŒåŒ…æ‹¬åç§°ã€ä»‹ç»ã€å¤šåª’ä½“ã€åœ°ç†ä½ç½®ã€è¥ä¸šæ—¶é—´ç­‰ä¿¡æ¯ã€‚


---

## ç®¡ç†å‘˜æ³¨å†Œ

**POST /admin/auth/register**

### **è¯·æ±‚ Body**

```json
{
  "username": "admin123",
  "password": "123456",
  "email": "admin@example.com"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå      | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜    |
| -------- | ------ | ---- | ----- |
| username | string | æ˜¯    | ç”¨æˆ·å   |
| password | string | æ˜¯    | å¯†ç     |
| email    | string | æ˜¯    | ç®¡ç†å‘˜é‚®ç®± |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1,
    "username": "admin123",
    "email": "admin@example.com"
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 1001,
  "message": "ç”¨æˆ·åå·²å­˜åœ¨",
  "data": null
}
```


---

## ç®¡ç†å‘˜ç™»å½•

**POST /admin/auth/login**

### **è¯·æ±‚å‚æ•°**

| å‚æ•°       | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜  |
| -------- | ------ | ---- | --- |
| username | string | æ˜¯    | ç”¨æˆ·å |
| password | string | æ˜¯    | å¯†ç   |



### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "mock-token",
    "userId": 1,
    "username": "admin123",
    "email": "admin@example.com"
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 401,
  "message": "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯",
  "data": null
}
```

```json
{
  "code": 403,
  "message": "è´¦å·å·²è¢«ç¦ç”¨",
  "data": null
}
```



---

## è·å–æ™¯ç‚¹åˆ—è¡¨

**GET /admin/spots**

### **è¯·æ±‚å‚æ•°**

| å‚æ•°     | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜        |
| ------ | ------ | ---- | --------- |
| zoneId | int    | å¦    | æŒ‰å¼•é¢†åŒºIDè¿‡æ»¤  |
| name   | string | å¦    | æŒ‰æ™¯ç‚¹åç§°æ¨¡ç³Šæœç´¢ |


### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "spotId": 101,
      "name": "xxæ™¯ç‚¹",
      "images": ["https://example.com/img1.jpg","https://example.com/img2.jpg"],
      "video": "https://example.com/video.mp4",
      "description": "æ™¯ç‚¹è¯¦ç»†ä»‹ç»",
      "zoneId": 10,
      "latitude": 31.23,
      "longitude": 121.47,
      "openTime": "08:00-18:00"
    }
  ]
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 401,
  "message": "æœªæˆæƒï¼Œè¯·ç™»å½•",
  "data": null
}
```

---

## æ–°å¢æ™¯ç‚¹

**POST /admin/spots**

### **è¯·æ±‚ Body**

```json
{
  "name": "xxæ™¯ç‚¹",
  "images": ["https://example.com/img1.jpg","https://example.com/img2.jpg"],
  "video": "https://example.com/video.mp4",
  "description": "è¯¦ç»†è¯´æ˜",
  "zoneId": 10,
  "latitude": 31.23,
  "longitude": 121.47,
  "openTime": "08:00-18:00"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå         | ç±»å‹            | æ˜¯å¦å¿…å¡« | è¯´æ˜       |
| ----------- | ------------- | ---- | -------- |
| name        | string        | æ˜¯    | æ™¯ç‚¹åç§°     |
| images      | array[string] | å¦    | å¤šå¼ å±•ç¤ºå›¾    |
| video       | string        | å¦    | æ™¯ç‚¹ä»‹ç»è§†é¢‘   |
| description | string        | æ˜¯    | æ™¯ç‚¹è¯¦ç»†è¯´æ˜   |
| zoneId      | int           | æ˜¯    | æ‰€å±å¼•é¢†åŒºID  |
| latitude    | float         | æ˜¯    | åœ°ç†åæ ‡ï¼ˆçº¬åº¦ï¼‰ |
| longitude   | float         | æ˜¯    | åœ°ç†åæ ‡ï¼ˆç»åº¦ï¼‰ |
| openTime    | string        | å¦    | è¥ä¸šæˆ–å¼€æ”¾æ—¶é—´  |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ–°å¢æˆåŠŸ",
  "data": {
    "spotId": 101
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 1000,
  "message": "å‚æ•°æ ¡éªŒå¤±è´¥",
  "data": {
    "field": "name",
    "reason": "åç§°ä¸èƒ½ä¸ºç©º"
  }
}
```

---

##  ä¿®æ”¹æ™¯ç‚¹

**PUT /admin/spots/{spotId}**

### **è¯·æ±‚ Body**

å¯æ›´æ–°ä»»æ„å­—æ®µï¼š

```json
{
  "name": "æ–°æ™¯ç‚¹åç§°",
  "images": ["https://example.com/new1.jpg"],
  "description": "ä¿®æ”¹åçš„è¯´æ˜",
  "latitude": 31.25,
  "longitude": 121.48
}
```

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "æ™¯ç‚¹ä¸å­˜åœ¨",
  "data": null
}
```

---

##  åˆ é™¤æ™¯ç‚¹

**DELETE /admin/spots/{spotId}**

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "æ™¯ç‚¹ä¸å­˜åœ¨",
  "data": null
}
```

---

# ## UC-202 æ‰“å¡ç‚¹ç®¡ç†æ¥å£

### **æ¦‚è¿°**

ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥å¯¹æ¸¸å®¢å¯æ‰“å¡çš„ç‚¹ä½è¿›è¡Œç®¡ç†ï¼ŒåŒ…æ‹¬æ–°å¢ã€ä¿®æ”¹ã€ç¦ç”¨/å¯ç”¨å’Œåˆ é™¤ã€‚æ¯ä¸ªæ‰“å¡ç‚¹å…³è”ä¸€ä¸ªæ™¯ç‚¹ï¼ˆspotIdï¼‰ï¼Œå¹¶æœ‰åœ°ç†ä½ç½®å’Œæœ‰æ•ˆæ‰“å¡åŠå¾„ã€‚

---

##  è·å–æ‰“å¡ç‚¹åˆ—è¡¨

**GET /admin/checkpoints**

### **è¯·æ±‚å‚æ•°ï¼ˆå¯é€‰ï¼‰**

| å‚æ•°     | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜                      |
| ------ | ------ | ---- | ----------------------- |
| spotId | int    | å¦    | æŒ‰æ™¯ç‚¹IDè¿‡æ»¤                 |
| status | string | å¦    | æŒ‰çŠ¶æ€è¿‡æ»¤: enabled/disabled |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "checkpointId": 1001,
      "spotId": 101,
      "name": "æ™¯ç‚¹æ‰“å¡ç‚¹1",
      "latitude": 31.231,
      "longitude": 121.471,
      "radius": 100,
      "status": "enabled"
    }
  ]
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 401,
  "message": "æœªæˆæƒï¼Œè¯·ç™»å½•",
  "data": null
}
```

---

##  æ–°å¢æ‰“å¡ç‚¹

**POST /admin/checkpoints**

### **è¯·æ±‚ Body**

```json
{
  "spotId": 101,
  "name": "æ™¯ç‚¹æ‰“å¡ç‚¹1",
  "latitude": 31.231,
  "longitude": 121.471,
  "radius": 100
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå       | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜        |
| --------- | ------ | ---- | --------- |
| spotId    | int    | æ˜¯    | å…³è”æ™¯ç‚¹ID    |
| name      | string | æ˜¯    | æ‰“å¡ç‚¹åç§°     |
| latitude  | float  | æ˜¯    | çº¬åº¦        |
| longitude | float  | æ˜¯    | ç»åº¦        |
| radius    | int    | æ˜¯    | æœ‰æ•ˆæ‰“å¡åŠå¾„ï¼ˆç±³ï¼‰ |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ–°å¢æˆåŠŸ",
  "data": {
    "checkpointId": 1001
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 1000,
  "message": "å‚æ•°æ ¡éªŒå¤±è´¥",
  "data": {
    "field": "name",
    "reason": "åç§°ä¸èƒ½ä¸ºç©º"
  }
}
```

---

## ä¿®æ”¹æ‰“å¡ç‚¹

**PUT /admin/checkpoints/{checkpointId}**

### **è¯·æ±‚ Body**

å¯æ›´æ–°ä»»æ„å­—æ®µï¼š

```json
{
  "name": "æ–°æ‰“å¡ç‚¹åç§°",
  "latitude": 31.232,
  "longitude": 121.472,
  "radius": 120
}
```

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "æ‰“å¡ç‚¹ä¸å­˜åœ¨",
  "data": null
}
```

---

##  ç¦ç”¨/å¯ç”¨æ‰“å¡ç‚¹

**PATCH /admin/checkpoints/{checkpointId}/status**

### **è¯·æ±‚ Body**

```json
{
  "status": "enabled" // æˆ– "disabled"
}
```

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "çŠ¶æ€æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "æ‰“å¡ç‚¹ä¸å­˜åœ¨",
  "data": null
}
```

---

##  åˆ é™¤æ‰“å¡ç‚¹

**DELETE /admin/checkpoints/{checkpointId}**

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "æ‰“å¡ç‚¹ä¸å­˜åœ¨",
  "data": null
}
```

---

# ## UC-203 ç§¯åˆ†ç®¡ç†æ¥å£

### **æ¦‚è¿°**

ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ç®¡ç†ç§¯åˆ†è§„åˆ™å’ŒæŸ¥çœ‹ç”¨æˆ·ç§¯åˆ†æµæ°´ã€‚æ¸¸å®¢æ‰“å¡ã€å…‘æ¢ç¤¼å“ç­‰è¡Œä¸ºä¼šæ ¹æ®è§„åˆ™è·å¾—æˆ–æ¶ˆè€—ç§¯åˆ†ã€‚

---

##  è·å–ç§¯åˆ†è§„åˆ™åˆ—è¡¨

**GET /admin/points/rules**

### **è¯·æ±‚å¤´**

| Header åç§°     | ç¤ºä¾‹                       | å¿…å¡« | è¯´æ˜          |
| ------------- | ------------------------ | -- | ----------- |
| Authorization | Bearer xxxxx.yyyyy.zzzzz | æ˜¯  | ç®¡ç†å‘˜ç™»å½• Token |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "ruleId": 1,
      "type": "checkin",
      "description": "é¦–æ¬¡æ‰“å¡æ–°ç‚¹ä½å¥–åŠ±",
      "points": 100,
      "status": "enabled"
    },
    {
      "ruleId": 2,
      "type": "redeem",
      "description": "å…‘æ¢ç¤¼å“æ¶ˆè€—ç§¯åˆ†",
      "points": -500,
      "status": "enabled"
    }
  ]
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 401,
  "message": "æœªæˆæƒï¼Œè¯·ç™»å½•",
  "data": null
}
```

---

##  æ–°å¢ç§¯åˆ†è§„åˆ™

**POST /admin/points/rules**

### **è¯·æ±‚ Body**

```json
{
  "type": "checkin",
  "description": "é¦–æ¬¡æ‰“å¡æ–°ç‚¹ä½å¥–åŠ±",
  "points": 100,
  "status": "enabled"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå         | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜                          |
| ----------- | ------ | ---- | --------------------------- |
| type        | string | æ˜¯    | ç§¯åˆ†ç±»å‹ï¼Œå¦‚ checkin/redeem/other |
| description | string | æ˜¯    | è§„åˆ™è¯´æ˜                        |
| points      | int    | æ˜¯    | ç§¯åˆ†æ•°é‡ï¼Œå¯ä¸ºè´Ÿå€¼                   |
| status      | string | æ˜¯    | çŠ¶æ€: enabled/disabled        |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ–°å¢æˆåŠŸ",
  "data": {
    "ruleId": 3
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 1000,
  "message": "å‚æ•°æ ¡éªŒå¤±è´¥",
  "data": {
    "field": "points",
    "reason": "ç§¯åˆ†ä¸èƒ½ä¸ºç©º"
  }
}
```

---

##  ä¿®æ”¹ç§¯åˆ†è§„åˆ™

**PUT /admin/points/rules/{ruleId}**

### **è¯·æ±‚ Body**

```json
{
  "description": "ä¿®æ”¹è¯´æ˜",
  "points": 150,
  "status": "enabled"
}
```

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "è§„åˆ™ä¸å­˜åœ¨",
  "data": null
}
```

---

##  åˆ é™¤ç§¯åˆ†è§„åˆ™

**DELETE /admin/points/rules/{ruleId}**

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "è§„åˆ™ä¸å­˜åœ¨",
  "data": null
}
```

---

##  è·å–ç”¨æˆ·ç§¯åˆ†æµæ°´

**GET /admin/points/users/{userId}/logs**

### **è¯·æ±‚å‚æ•°ï¼ˆå¯é€‰ï¼‰**

| å‚æ•°        | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜              |
| --------- | ------ | ---- | --------------- |
| startDate | string | å¦    | å¼€å§‹æ—¶é—´ YYYY-MM-DD |
| endDate   | string | å¦    | ç»“æŸæ—¶é—´ YYYY-MM-DD |
| type      | string | å¦    | ç§¯åˆ†ç±»å‹è¿‡æ»¤          |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "logId": 1001,
      "userId": 1001,
      "type": "checkin",
      "points": 100,
      "description": "é¦–æ¬¡æ‰“å¡æ–°ç‚¹ä½å¥–åŠ±",
      "timestamp": "2025-11-17T09:23:45Z"
    },
    {
      "logId": 1002,
      "userId": 1001,
      "type": "redeem",
      "points": -500,
      "description": "å…‘æ¢ç¤¼å“æ¶ˆè€—ç§¯åˆ†",
      "timestamp": "2025-11-17T11:10:23Z"
    }
  ]
}
```



---

# ## UC-204 ç¤¼å“ç®¡ç†æ¥å£

### **æ¦‚è¿°**

ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥ç®¡ç†å¯å…‘æ¢ç¤¼å“ï¼ŒåŒ…æ‹¬æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ã€åº“å­˜ç»´æŠ¤ï¼Œä»¥åŠæŸ¥çœ‹å…‘æ¢ä¸æ ¸é”€ç»Ÿè®¡ã€‚æ¸¸å®¢å¯åœ¨å‰ç«¯ä½¿ç”¨ç§¯åˆ†å…‘æ¢ç¤¼å“ã€‚

---

##  è·å–ç¤¼å“åˆ—è¡¨

**GET /admin/gifts**

### **è¯·æ±‚å‚æ•°ï¼ˆå¯é€‰ï¼‰**

| å‚æ•°      | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜                                     |
| ------- | ------ | ---- | -------------------------------------- |
| status  | string | å¦    | ç¤¼å“çŠ¶æ€è¿‡æ»¤: available / soldOut / disabled |
| keyword | string | å¦    | ç¤¼å“åç§°å…³é”®å­—æœç´¢                              |


### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "giftId": 101,
      "name": "é™é‡é’¥åŒ™æ‰£",
      "description": "çºªå¿µæ™¯åŒºé™é‡é’¥åŒ™æ‰£",
      "images": ["https://example.com/gift1.jpg"],
      "pointsRequired": 500,
      "stock": 100,
      "status": "available",
      "supplier": "æ™¯åŒºçºªå¿µå“å‚å•†",
      "validity": "2025-12-31"
    }
  ]
}
```

---

##  æ–°å¢ç¤¼å“

**POST /admin/gifts**

### **è¯·æ±‚ Body**

```json
{
  "name": "é™é‡é’¥åŒ™æ‰£",
  "description": "çºªå¿µæ™¯åŒºé™é‡é’¥åŒ™æ‰£",
  "images": ["https://example.com/gift1.jpg"],
  "pointsRequired": 500,
  "stock": 100,
  "status": "available",
  "supplier": "æ™¯åŒºçºªå¿µå“å‚å•†",
  "validity": "2025-12-31"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå            | ç±»å‹            | æ˜¯å¦å¿…å¡« | è¯´æ˜                                 |
| -------------- | ------------- | ---- | ---------------------------------- |
| name           | string        | æ˜¯    | ç¤¼å“åç§°                               |
| description    | string        | æ˜¯    | ç¤¼å“æè¿°                               |
| images         | array[string] | å¦    | ç¤¼å“å±•ç¤ºå›¾ç‰‡åˆ—è¡¨                           |
| pointsRequired | int           | æ˜¯    | å…‘æ¢æ‰€éœ€ç§¯åˆ†                             |
| stock          | int           | æ˜¯    | åº“å­˜æ•°é‡                               |
| status         | string        | æ˜¯    | çŠ¶æ€: available / soldOut / disabled |
| supplier       | string        | å¦    | ä¾›åº”å•†ä¿¡æ¯                              |
| validity       | string        | å¦    | æœ‰æ•ˆæœŸ YYYY-MM-DD                     |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ–°å¢æˆåŠŸ",
  "data": {
    "giftId": 102
  }
}
```

---

##  ä¿®æ”¹ç¤¼å“

**PUT /admin/gifts/{giftId}**

### **è¯·æ±‚ Body**

```json
{
  "name": "çºªå¿µé’¥åŒ™æ‰£",
  "description": "æ›´æ–°æè¿°",
  "pointsRequired": 600,
  "stock": 80,
  "status": "available",
  "validity": "2025-12-31"
}
```

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "ç¤¼å“ä¸å­˜åœ¨",
  "data": null
}
```

---

##  åˆ é™¤ç¤¼å“

**DELETE /admin/gifts/{giftId}**

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "åˆ é™¤æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 404,
  "message": "ç¤¼å“ä¸å­˜åœ¨",
  "data": null
}
```

---

##  è°ƒæ•´åº“å­˜

**PATCH /admin/gifts/{giftId}/stock**

### **è¯·æ±‚ Body**

```json
{
  "stock": 120
}
```

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "åº“å­˜æ›´æ–°æˆåŠŸ",
  "data": null
}
```

---

##  æŸ¥çœ‹å…‘æ¢ç»Ÿè®¡

**GET /admin/gifts/{giftId}/redeems**

### **è¯·æ±‚å‚æ•°ï¼ˆå¯é€‰ï¼‰**

| å‚æ•°        | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜              |
| --------- | ------ | ---- | --------------- |
| startDate | string | å¦    | å¼€å§‹æ—¶é—´ YYYY-MM-DD |
| endDate   | string | å¦    | ç»“æŸæ—¶é—´ YYYY-MM-DD |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "redeemId": 1001,
      "userId": 1001,
      "username": "test123",
      "giftId": 101,
      "pointsUsed": 500,
      "redeemTime": "2025-11-17T09:23:45Z",
      "status": "redeemed"
    }
  ]
}
```

---

# ## UC-205 ç”¨æˆ·ç®¡ç†æ¥å£

### **æ¦‚è¿°**

ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹ã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ˜µç§°ã€å¤´åƒã€ç§¯åˆ†ã€æ˜¯å¦ä¸ºå•†å®¶ç­‰ã€‚æ¸¸å®¢æ³¨å†Œä¿¡æ¯å¯è¢«æŸ¥è¯¢ï¼Œç³»ç»Ÿç”¨äºç®¡ç†å’Œç»Ÿè®¡ã€‚

---

## è·å–ç”¨æˆ·åˆ—è¡¨

**GET /admin/users**

### **è¯·æ±‚å‚æ•°ï¼ˆå¯é€‰ï¼‰**

| å‚æ•°         | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜          |
| ---------- | ------ | ---- | ----------- |
| keyword    | string | å¦    | ç”¨æˆ·å/æ˜µç§°å…³é”®å­—æœç´¢ |
| isMerchant | string | å¦    | æ˜¯å¦ä¸ºå•†å®¶è¿‡æ»¤ Y/N |
| page       | int    | å¦    | é¡µç ï¼Œé»˜è®¤1      |
| pageSize   | int    | å¦    | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20   |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "total": 120,
    "users": [
      {
        "userId": 1001,
        "username": "test123",
        "nickname": "å°æ˜",
        "avatar": "https://example.com/avatar.jpg",
        "email": "test123@example.com",
        "points": 3200,
        "checkinCount": 15,
        "checkinSpotIds": [101,102,103],
        "isMerchant": "N"
      }
    ]
  }
}
```

---

##  è·å–å•ä¸ªç”¨æˆ·ä¿¡æ¯

**GET /admin/users/{userId}**

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "userId": 1001,
    "username": "test123",
    "nickname": "å°æ˜",
    "avatar": "https://example.com/avatar.jpg",
    "email": "test123@example.com",
    "points": 3200,
    "checkinCount": 15,
    "checkinSpotIds": [101,102,103],
    "isMerchant": "N"
  }
}
```

### **å¤±è´¥è¿”å›**

```json
{
  "code": 404,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```

---

##  ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯

**PUT /admin/users/{userId}**

### **è¯·æ±‚ Bodyï¼ˆå¯é€‰å­—æ®µï¼‰**

```json
{
  "nickname": "å°çº¢",
  "avatar": "https://example.com/newavatar.jpg",
  "points": 3500,
  "isMerchant": "Y"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå        | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜        |
| ---------- | ------ | ---- | --------- |
| nickname   | string | å¦    | ç”¨æˆ·æ˜µç§°      |
| avatar     | string | å¦    | ç”¨æˆ·å¤´åƒ      |
| points     | int    | å¦    | ç§¯åˆ†        |
| isMerchant | string | å¦    | æ˜¯å¦ä¸ºå•†å®¶ Y/N |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ›´æ–°æˆåŠŸ",
  "data": null
}
```

### **å¤±è´¥è¿”å›**

```json
{
  "code": 404,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```


### **å¤±è´¥è¿”å›**

```json
{
  "code": 404,
  "message": "ç”¨æˆ·ä¸å­˜åœ¨",
  "data": null
}
```


---

# ## UC-301 æ ¸é”€ç¤¼å“

### **æ¦‚è¿°**

å•†å®¶é€šè¿‡å•†å®¶ç«¯å°ç¨‹åºæ‰«ææ¸¸å®¢ç¤¼å“å…‘æ¢äºŒç»´ç ï¼ŒéªŒè¯æœ‰æ•ˆæ€§åè¿›è¡Œæ ¸é”€ã€‚

---

## **æ¥å£**ï¼šPOST /merchant/verify

### **è¯·æ±‚ Body**

```json
{
  "redeemId": 1001,
  "giftCode": "ABC123XYZ"
}
```

### **å­—æ®µè¯´æ˜**

| å­—æ®µå      | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜        |
| -------- | ------ | ---- | --------- |
| redeemId | int    | æ˜¯    | ç¤¼å“å…‘æ¢è®°å½•ID  |
| giftCode | string | æ˜¯    | ç¤¼å“å…‘æ¢äºŒç»´ç æˆ–ç  |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "æ ¸é”€æˆåŠŸ",
  "data": {
    "redeemId": 1001,
    "userId": 1001,
    "username": "test123",
    "giftId": 101,
    "giftName": "é™é‡é’¥åŒ™æ‰£",
    "merchantId": 501,
    "redeemTime": "2025-11-17T09:23:45Z",
    "status": "verified"
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 400,
  "message": "å…‘æ¢è®°å½•çŠ¶æ€å¼‚å¸¸ï¼ˆå·²æ ¸é”€æˆ–å·²è¿‡æœŸï¼‰",
  "data": null
}
```

```json
{
  "code": 403,
  "message": "è¯¥ç¤¼å“ä¸å±äºå½“å‰å•†å®¶",
  "data": null
}
```

```json
{
  "code": 404,
  "message": "å…‘æ¢è®°å½•ä¸å­˜åœ¨",
  "data": null
}
```

---

# ## UC-302 æŸ¥çœ‹æ ¸é”€ç»Ÿè®¡

### **æ¦‚è¿°**

å•†å®¶æŸ¥çœ‹è‡ªå·±åº—é“ºç¤¼å“æ ¸é”€æ•°æ®ï¼ŒåŒ…æ‹¬æ€»æ ¸é”€æ•°é‡ã€æ¯æ—¥æ ¸é”€è¶‹åŠ¿ã€æ ¸é”€æ˜ç»†ç­‰ã€‚

---

## **æ¥å£**ï¼šGET /merchant/stats


### **è¯·æ±‚å‚æ•°ï¼ˆå¯é€‰ï¼‰**

| å‚æ•°        | ç±»å‹     | æ˜¯å¦å¿…å¡« | è¯´æ˜              |
| --------- | ------ | ---- | --------------- |
| startDate | string | å¦    | å¼€å§‹æ—¶é—´ YYYY-MM-DD |
| endDate   | string | å¦    | ç»“æŸæ—¶é—´ YYYY-MM-DD |
| giftId    | int    | å¦    | æŒ‰ç¤¼å“IDç­›é€‰æ ¸é”€æ•°æ®     |

### **æˆåŠŸè¿”å›**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "totalVerified": 120,
    "dailyStats": [
      {
        "date": "2025-11-15",
        "verifiedCount": 20
      },
      {
        "date": "2025-11-16",
        "verifiedCount": 35
      }
    ],
    "details": [
      {
        "redeemId": 1001,
        "userId": 1001,
        "username": "test123",
        "giftId": 101,
        "giftName": "é™é‡é’¥åŒ™æ‰£",
        "redeemTime": "2025-11-17T09:23:45Z",
        "status": "verified"
      }
    ]
  }
}
```

### **å¤±è´¥è¿”å›ç¤ºä¾‹**

```json
{
  "code": 401,
  "message": "æœªæˆæƒï¼Œè¯·ç™»å½•",
  "data": null
}
```

---

## **é”™è¯¯ç è¯´æ˜**

| é”™è¯¯ç   | æè¿°              |
| ---- | --------------- |
| 200  | æˆåŠŸ              |
| 400  | è¯·æ±‚å‚æ•°é”™è¯¯æˆ–å…‘æ¢è®°å½•çŠ¶æ€å¼‚å¸¸ |
| 401  | æœªæˆæƒæˆ–ç™»å½•å¤±æ•ˆ        |
| 403  | ç¤¼å“ä¸å±äºå½“å‰å•†å®¶       |
| 404  | å…‘æ¢è®°å½•ä¸å­˜åœ¨         |
| 9999 | æœåŠ¡å™¨é”™è¯¯           |

---

 **è¯´æ˜**ï¼š

* UC-301 æ ¸é”€æ¥å£ç”¨äºå•æ¬¡ç¤¼å“æ ¸é”€
* UC-302 ç»Ÿè®¡æ¥å£ç”¨äºæŸ¥çœ‹æ±‡æ€»å’Œæ˜ç»†
* å•†å®¶ä»…èƒ½æŸ¥çœ‹/æ ¸é”€è‡ªå·±åº—é“ºçš„ç¤¼å“


