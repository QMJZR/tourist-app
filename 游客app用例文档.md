### **游客应用项目 - 用例文档**

**版本：** 1.0

------

#### **1. 文档简介**

本文档旨在将《游客应用项目需求文档》中描述的功能性需求，转化为标准化的用例描述。用例将以用户（执行者）与系统的交互为核心，详细描述为达成特定目标所发生的事件流，包括主成功场景、扩展场景、前置与后置条件等。本文档将作为系统设计、开发和测试的重要依据。

#### **2. 执行者定义**

| 执行者              | 描述                                                         |
| :------------------ | :----------------------------------------------------------- |
| **游客**            | 应用的主要使用者，通过登录/注册，使用信息查询、打卡、互动、兑换等功能。 |
| **系统管理员**      | 管理后台的最高权限用户，负责内容管理、用户管理、数据查看与分析、景区、景点、商家等内容的编辑与上下架。 |
| **商家**            | 合作商家的用户，在商家端应用中负责核销游客兑换的礼品。     |
| **微信认证系统**    | 外部系统，负责处理用户的微信登录认证。                       |
| **地图服务**        | 外部系统（如腾讯地图、高德地图API），提供地图展示、GPS定位、路径规划与导航服务。 |
| **LLM与大数服服务** | 外部系统，提供智能问答和个性化推荐的计算能力。               |

#### **3. 用例图概览**

![游客.drawio](C:\Users\32349\Desktop\游客.drawio.png)

#### **4. 详细用例说明**

**用例名称:** UC-001 登录/注册

| 项        | 描述                                    |
| :------- | :------------------------------------ |
| **用例ID** | UC-001                                |
| **用例名称** | 用户登录/注册（账号密码）                         |
| **执行者**  | 游客、商家                                 |
| **描述**   | 游客/商家通过账号密码进行登录，若无账号则可注册，系统创建或更新用户账户。 |
| **前置条件** | 无                                     |


---


# **主成功场景1：**

1. 游客首次访问网站或在登录态失效后进入登录页面。
2. 系统检测到无有效登录会话，展示登录界面（含“登录”“注册”入口）。
3. 用户在登录界面输入账号（手机号/邮箱/用户名）与密码，点击“登录”。
4. 系统校验用户输入的账号格式与必填项是否有效。
5. 系统将账号与密码发送至应用服务器进行身份校验。
6. 应用服务器根据账号查询用户信息。
7. 如果账号不存在，系统提示“账号不存在，请注册”。
8. 如果账号存在但密码错误，系统提示“密码错误，请重试”。
9. 当账号存在且密码正确时，系统更新该用户的最后登录时间及相关信息。
10. 系统生成登录令牌（Token）并返回给前端。
11. 前端接收并存储 Token，后续所有请求携带该 Token 用于身份验证。
12. 系统提示“登录成功”，并跳转至网站首页。

---

# **主成功场景2：**

**A1：用户点击注册入口**

1. 用户在登录页选择“注册”。
2. 系统展示注册页面（填写账号、密码、确认密码等）。
3. 用户填写必要信息并提交注册表单。
4. 系统校验账号是否已存在、密码是否符合规则。
5. 若账号已存在，提示“账号已被注册”。
6. 若数据校验通过，系统创建新用户账户，并初始化其积分、等级等信息。
7. 系统自动为新用户生成 Token 并返回给前端。
8. 前端存储 Token，并自动登录进入首页。



---

**用例名称:** UC-101 查看引领区与景点信息

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-101                                                       |
| **用例名称** | 查看引领区与景点信息                                         |
| **执行者**   | 游客、地图服务                                               |
| **描述**     | 游客浏览景区引领区的总体介绍，并查看特定景点、住宿或饭店的详细信息，包括位置、图文介绍，并可使用导航功能。 |
| **前置条件** | 游客已成功登录应用。                                       |

**主成功场景：**

1. 游客在首页点击“景区引领区”。
2. 系统展示引领区的概览页面，包括文字简介、宣传图集或视频。
3. 游客向下滚动或点击Tab切换至“景点列表”（或“住宿”、“饭店”）。
4. 系统以卡片列表形式展示所有上架的景点，包含缩略图、名称、简短描述和距离信息。
5. 游客点击一个感兴趣的景点卡片。
6. 系统跳转到该景点的详情页，加载并展示其完整信息：详细文字介绍、高清图集、视频，并嵌入地图显示其精确位置。
7. 游客点击详情页上的“导航”按钮。
8. 系统调用地图服务，并传入当前用户位置和景点位置坐标。
9. 地图服务启动（如微信内置地图或外部地图APP），生成从当前位置到景点的路线规划。
10. 游客根据地图服务的指引前往目的地。

**扩展场景：**

- **7a. 游客仅想查看地图位置：**
  1. 游客可以点击详情页上的地图组件本身进行缩放和拖动，查看周边环境，而不直接发起导航。
- **8a. 系统无法获取用户当前位置：**
  1. 系统提示“无法获取您的位置，将为您展示景点位置”，并在地图上仅标注景点位置。

---

**用例名称:** UC-102 进行地图打卡

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-102                                                       |
| **用例名称** | 进行地图打卡                                                 |
| **执行者**   | 游客、地图服务、系统                                         |
| **描述**     | 游客在手绘地图上选择景点，拍照并完成打卡。系统将验证其GPS位置，通过后记录打卡并奖励积分。 |
| **前置条件** | 1. 游客已成功登录。 2. 手机GPS定位功能已开启。         |
| **后置条件** | 1. 打卡记录被保存。 2. 游客获得相应积分（若为首次打卡该点位）。 3. 该打卡动态出现在“点评动态”流中。 |

**主成功场景：**

1. 游客进入“地图打卡”页面，系统加载手绘地图并显示所有打卡点位。
2. 游客点击一个感兴趣的打卡点位。
3. 系统弹出点位详情浮层，显示点位名称、简介和“打卡”按钮。
4. 游客点击“打卡”按钮。
5. 系统调用手机摄像头，游客拍摄一张与景点相关的照片。
6. 游客确认使用该照片，并点击“提交”。
7. 系统获取游客当前精确的GPS坐标。
8. 系统将游客坐标与打卡点位的坐标进行比对，计算距离。
9. 系统验证距离在允许范围内（100米内）。
10. 系统验证该用户今日在此点位未重复打卡。
11. 系统保存打卡记录（含照片、时间、点位ID、用户ID）。
12. 系统为该用户增加相应积分（若符合积分规则）。
13. 系统提示“打卡成功！获得100积分”。
14. 该条打卡动态发布到“点评动态”流中。

**扩展场景：**

- **8a. 游客不在有效打卡范围内：**
  1. 系统提示“您距离打卡点过远，请靠近后再试。”
  2. 用例结束。
- **10a. 游客今日已在此点位打卡：**
  1. 系统提示“您今天已经在此打卡过了，请明天再来吧！”
  2. 用例结束。
- **5a. 游客取消拍照：**
  1. 系统关闭摄像头，返回地图界面。
  2. 用例结束。
- **7a. 系统无法获取GPS信号：**
  1. 系统提示“无法获取您的位置，请检查GPS设置或网络连接。”
  2. 用例结束。

**特殊需求：**

- **性能需求：** 从提交打卡到收到结果，响应时间应小于3秒。

------

**用例名称:** UC-103 查看与点赞他人动态

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-103                                                       |
| **用例名称** | 查看与点赞他人动态                                           |
| **执行者**   | 游客                                                         |
| **描述**     | 游客在一个信息流中浏览其他游客发布的打卡动态（含文字、图片），并可以对喜欢的动态进行点赞操作。 |
| **前置条件** | 游客已成功登录。                                       |

**主成功场景：**

1. 游客点击底部导航栏的“动态“页签。
2. 系统以瀑布流形式加载并展示最新的打卡动态列表，每条动态包含用户头像、昵称、打卡点位、打卡图片、文字描述、点赞数和发布时间。
3. 游客浏览动态列表，上下滑动查看更多内容。
4. 游客看到一条喜欢的动态，点击该动态右下角的星级进行评分和“爱心”点赞图标。
5. 系统立即将图标变为已选中的红色状态，并将该动态的点赞数+1。
6. 系统在后台记录该用户的评分和点赞行为（用户ID，动态ID）。

**扩展场景：**

- **4a. 游客取消点赞：**
  1. 游客再次点击已选中的“爱心”图标。
  2. 系统将图标恢复为未选中状态，并将点赞数-1。
  3. 系统在后台删除该点赞记录。
- **2a. 列表为空或加载完毕：**
  1. 系统显示“暂无动态”的提示。

**特殊需求：**

- **实时性：** 点赞操作的视觉反馈应即时出现，无需等待服务器响应（可采用乐观UI设计）。
- **缓存：** 动态列表应支持分页加载，避免一次性加载过多数据。

---

**用例名称:** UC-104 使用智能问答

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-104                                                       |
| **用例名称** | 使用智能问答                                                 |
| **执行者**   | 游客、LLM与大数服服务                                        |
| **描述**     | 游客通过自然语言提问，获取关于景区的信息或个性化推荐。系统基于用户历史行为和上下文生成回答。 |
| **前置条件** | 游客已成功登录应用。                                       |

**主成功场景：**

1. 游客在首页找到“智能助手”入口并点击。
2. 系统打开智能问答界面。
3. 游客输入一个问题，例如：“附近有什么适合带孩子吃的餐厅？”或“给我推荐一条半天的游览路线”。
4. 系统将用户问题、用户当前位置、用户历史打卡偏好等上下文信息发送给LLM服务。
5. LLM服务处理请求，生成结构化、准确的回答。
6. 系统接收并格式化LLM的回复，展示给游客。
7. 回复中的推荐项（如餐厅、景点）可点击跳转至其详情页。

**扩展场景：**

- **5a. LLM服务无响应或超时：**
  1. 系统提示“小助手暂时无法响应，请稍后再试。”
  2. 用例结束。
- **5b. LLM返回的回答不明确或无法理解问题：**
  1. 系统展示“抱歉，我没有理解您的问题，您可以尝试换种方式提问吗？”
  2. 提供几个示例问题引导用户。

**特殊需求：**

- **数据隐私：** 向LLM服务发送的数据需进行脱敏处理，不得包含用户个人身份信息。
- **响应时间：** LLM问答的整体响应时间应控制在5秒以内。

---

**用例名称:** UC-105 查看排行榜

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-105                                                       |
| **用例名称** | 查看排行榜                                                   |
| **执行者**   | 游客                                                         |
| **描述**     | 游客查看基于打卡数量和获赞数量进行综合计算的用户排行榜，榜单数据实时更新。 |
| **前置条件** | 游客已成功登录应用。                                       |

**主成功场景：**

1. 游客在个人中心页点击“打卡排行榜”入口。
2. 系统展示排行榜页面，列表综合打卡数量和点赞量排序。
3. 列表清晰展示排名、用户头像、昵称、总打卡数和点赞量。

**扩展场景：**

- **3a. 游客点击某个排行榜用户：**
  1. 系统可跳转到该用户的个人主页，展示其公开的打卡动态。

**特殊需求：**

- **防作弊：** 排名算法应具备基本的防作弊机制，如同一点位重复打卡不计入有效数量等。

------

**用例名称:** UC-106 附近推荐

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-106                                                       |
| **用例名称** | 附近推荐                                                     |
| **执行者**   | 游客、地图服务、LLM与大数服服务                              |
| **描述**     | 系统基于游客的实时位置，以瀑布流形式智能推荐附近的景点或商家，支持按距离和热度排序。 |
| **前置条件** | 1. 游客已成功登录应用。 2. 手机GPS定位功能已开启。         |

**主成功场景：**

1. 游客点击底部导航栏的“推荐”页签。
2. 系统获取游客的实时地理位置。
3. 系统向服务器请求附近的推荐点位（景点、商家）列表。
4. 服务器结合距离、热度（打卡/消费次数）进行计算和排序。
5. 系统以瀑布流形式展示推荐结果，每个卡片包含点位图片、名称、简介、距离和“去打卡”/“查看”按钮。
6. 游客点击景点卡片上的“去打卡”按钮，直接跳转到地图打卡页面并定位到该点位。
7. 游客点击商家卡片上的“查看”按钮，跳转到该商家的详情页，可以一键拨打电话。

**扩展场景：**

- **2a. 系统无法获取GPS信号：**
  1. 系统提示“无法获取位置，将为您展示全域热门推荐”，并加载非基于位置的通用热门榜单。
- **4a. 游客使用排序筛选：**
  1. 游客点击排序筛选器，选择“按距离最近”或“按热度最高”。
  2. 系统根据新的排序规则重新加载并展示列表。

------

**用例名称:** UC-107 管理个人中心信息

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-107                                                       |
| **用例名称** | 管理个人中心信息                                             |
| **执行者**   | 游客                                                         |
| **描述**     | 游客在个人中心查看和管理自己的核心信息，包括打卡记录、积分、礼品兑换情况，并查看活动说明和联系客服。 |
| **前置条件** | 游客已成功登录应用。                                       |

**主成功场景：**

1. 游客点击底部导航栏的“我的”或“个人中心”页签。
2. 系统进入个人中心首页，展示用户头像、昵称、当前积分、打卡总数等概要信息。
3. 游客点击“我的打卡”记录。
4. 系统跳转到打卡记录页面，以列表或网格形式展示所有历史打卡记录，包含图片和时间。
5. 游客点击“积分记录”。
6. 系统跳转到积分明细页面，清晰列出所有积分的获取（打卡、活动）和消耗（兑换礼品）记录。
7. 游客点击“礼品中心”。
8. 系统跳转到礼品列表页。

**扩展场景：**

- **3a. 游客删除某条打卡记录：**
  1. 在“我的打卡”页面，游客左滑或长按某条记录。
  2. 系统出现“删除”按钮。
  3. 游客确认删除，系统提示”删除成功“。
- **8a. 游客查看活动说明或联系客服：**
  1. 游客在个人中心点击“活动说明”或“热线客服”。
  2. 系统跳转到对应的静态页面展示活动规则，或直接调用手机拨号功能并填入客服电话。

---

**用例名称:** UC-201 管理内容（景区/景点/商家）

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-201                                                       |
| **用例名称** | 管理内容（景区/景点/商家）                                   |
| **执行者**   | 系统管理员                                                   |
| **描述**     | 系统管理员在管理后台对景区引领区介绍、景点、住宿、饭店、商家等信息进行增加、删除、修改、查询和上下架操作。 |
| **前置条件** | 1. 系统管理员已成功登录管理后台。 2. 系统管理员拥有内容管理的权限。 |

**主成功场景：**

1. 系统管理员从管理后台主导航进入“内容管理”模块，并选择子类（如“景点管理”）。
2. 系统以列表形式展示所有现有内容条目，支持按名称、状态等进行筛选。
3. 系统管理员点击“新增”按钮。
4. 系统跳转到内容编辑表单页面。
5. 系统管理员填写内容信息，包括：
   a. **基础信息：** 名称、简介、详细描述。
   b. **多媒体信息：** 上传封面图、详情图、介绍视频。
   c. **地理信息：** 输入地址，或在地图上点选坐标（用于打卡和导航）。
   d. **其他信息：** 联系方式、标签分类、排序值、上架/下架状态。
6. 系统管理员点击“提交”按钮。
7. 系统校验必填字段是否完整。
8. 校验通过，系统保存新内容。
9. 系统提示“操作成功”，并返回内容列表页，新内容显示在列表中。

**扩展场景：**

- **3a. 系统管理员编辑现有内容：**
  1. 系统管理员在列表页点击某条内容的“编辑”按钮。
  2. 系统跳转到编辑表单，并预填充该内容的现有信息。
  3. 后续流程同主成功场景5-9。
- **3b. 系统管理员下架某条内容：**
  1. 系统管理员点击“下架”按钮。
  2. 系统将该内容状态改为“下架”，使其不再对应用端可见。
  3. 系统提示“下架成功”。

------

**用例名称:** UC-202 管理打卡点位

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-202                                                       |
| **用例名称** | 管理打卡点位                                                 |
| **执行者**   | 系统管理员                                                   |
| **描述**     | 系统管理员对游客可以进行打卡的具体地理位置进行管理，包括设置点位坐标、有效打卡半径、绑定关联景点等。 |
| **前置条件** | 系统管理员已成功登录管理后台并拥有相应权限。                 |

**主成功场景：**

1. 系统管理员进入“打卡管理” -> “点位管理”。
2. 系统展示所有打卡点位的列表，包括点位名称、绑定景点、状态和坐标。
3. 系统管理员点击“新增点位”。
4. 系统打开一个地图界面，管理员通过点击地图来精确放置一个新的点位标记。
5. 管理员在侧边表单中填写点位信息：输入点位名称、选择绑定的景点（从已有景点列表中选择）、设置有效打卡半径（默认为100米）。
6. 管理员点击“保存”。
7. 系统保存点位的经纬度坐标和其他信息。
8. 新点位立即生效，游客在靠近此坐标时即可进行打卡。

**扩展场景：**

- **3a. 需要临时关闭一个点位：**
  1. 管理员在列表中找到该点位，点击“禁用”。
  2. 该点位被禁用后，游客在地图上将看不到它，也无法打卡。

**特殊需求：**

- **精度要求：** 点位坐标的选取应足够精确，确保游客在正确的物理位置进行打卡。

------

**用例名称:** UC-203 管理积分

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-203                                                       |
| **用例名称** | 管理积分                                                     |
| **执行者**   | 系统管理员                                                   |
| **描述**     | 系统管理员制定和调整积分获取与消耗的规则，并查看所有用户的积分记录。 |
| **前置条件** | 系统管理员已成功登录管理后台并拥有相应权限。                 |

**主成功场景：**

1. 系统管理员进入“积分管理”模块。
2. 系统展示积分规则的配置页面，如：打卡一次奖励X积分、连续打卡Y天额外奖励Z积分等。
3. 管理员修改了“首次打卡新点位”的奖励积分。
4. 管理员点击“保存规则”。
5. 系统更新积分规则，此后的所有打卡行为将按照新规则计算积分。
6. 管理员点击“积分记录”子菜单。
7. 系统展示所有用户的积分流水，支持按用户、时间、类型（获取/消耗）进行筛选。

**扩展场景：**

- **7a. 管理员发现异常积分记录：**
  1. 管理员可以通过记录找到相应用户，并手动进行积分调整（增/减）。

------

**用例名称:** UC-204 管理礼品

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-204                                                       |
| **用例名称** | 管理礼品                                                     |
| **执行者**   | 系统管理员                                                   |
| **描述**     | 系统管理员对可兑换的礼品进行管理，包括维护礼品信息、库存，管理供应商，以及查看兑换与核销统计。 |
| **前置条件** | 系统管理员已成功登录管理后台并拥有相应权限。                 |

**主成功场景：**

1. 系统管理员进入“礼品管理” -> “礼品清单”。
2. 系统展示所有礼品的列表，包括图片、名称、所需积分、库存和状态。
3. 管理员点击“新增礼品”。
4. 系统跳转到礼品编辑表单，管理员填写礼品名称、描述、图片、所需积分、总库存、供应商、有效期等。
5. 管理员点击“提交”，新礼品上架，游客端可见。
6. 管理员点击“兑换统计”子菜单。
7. 系统以图表形式展示各礼品的兑换数量、核销率等数据。

**扩展场景：**

- **3a. 礼品库存售罄：**
  1. 系统自动将礼品状态置为“已售罄”，并在管理员手动补充库存前，游客无法兑换。

------

**用例名称:** UC-205 管理用户

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-205                                                       |
| **用例名称** | 管理用户                                                     |
| **执行者**   | 系统管理员                                                   |
| **描述**     | 系统管理员查看平台注册用户列表，管理用户状态，并可对用户账号进行封禁等操作。 |
| **前置条件** | 系统管理员已成功登录管理后台并拥有相应权限。                 |

**主成功场景：**

1. 系统管理员进入“用户管理”。
2. 系统以列表形式展示所有注册用户，包括昵称、OpenID、注册时间、最后登录时间、状态（正常/封禁）。
3. 管理员通过搜索框输入昵称查找特定用户。
4. 管理员发现一个违规用户，点击该用户记录旁的“封禁”按钮。
5. 系统弹出确认框，管理员确认操作。
6. 系统将该用户状态更新为“封禁”，该用户将无法再登录应用。

**扩展场景：**

- **4a. 管理员解封用户：**
  1. 在用户列表中找到状态为“封禁”的用户，点击“解封”按钮。
  2. 用户状态恢复为“正常”，可以重新登录。

------

**用例名称:** UC-301 核销礼品

| 项           | 描述                                                      |
| :----------- | :-------------------------------------------------------- |
| **用例ID**   | UC-301                                                    |
| **用例名称** | 核销礼品                                                  |
| **执行者**   | 商家                                                      |
| **描述**     | 商家扫描游客的礼品兑换码，验证其有效性后进行核销。        |
| **前置条件** | 1. 商家已成功登录商家端。 2. 商家账号具有核销权限。 |

**主成功场景：**

1. 商家在商家端首页点击“礼品核销”。
2. 系统打开二维码扫描界面。
3. 商家扫描游客提供的礼品兑换二维码。
4. 系统解码并获取兑换记录ID。
5. 系统校验该兑换记录：
   a. 状态为“已兑换，待核销”。
   b. 礼品属于当前商家。
   c. 未过有效期。
6. 所有校验通过。
7. 系统显示礼品详情（如：礼品名称、兑换用户昵称），并询问“确认核销？”。
8. 商家点击“确认核销”。
9. 系统更新该兑换记录状态为“已核销”，并记录核销时间和核销商家。
10. 系统提示“核销成功！”。

**扩展场景：**

- **5a. 兑换记录状态异常（已核销或已过期）：**
  1. 系统提示“该礼品券已核销/已过期，无法再次核销。”
  2. 用例结束。
- **5b. 该礼品不属于当前商家：**
  1. 系统提示“此礼品非本店提供，请确认核销地点。”
  2. 用例结束。
- **3a. 二维码识别失败：**
  1. 系统提示“识别失败，请对准二维码重试。”并允许手动输入券码。
  2. 用例可继续。

---

**用例名称:** UC-302 查看核销统计

| 项           | 描述                                                         |
| :----------- | :----------------------------------------------------------- |
| **用例ID**   | UC-302                                                       |
| **用例名称** | 查看核销统计                                                 |
| **执行者**   | 商家                                                         |
| **描述**     | 商家在商家端中查看自己店铺的礼品核销数据统计，支持按日、周、月等多维度查看。 |
| **前置条件** | 商家已成功登录商家端。                                 |

**主成功场景：**

1. 商家在商家端首页点击“核销统计”。
2. 系统进入统计页面，默认展示“本月”的核销数据概览，如：总核销数量、每日核销趋势图。
3. 商家点击时间筛选器，选择“本周”。
4. 系统刷新图表和数据，展示本周的核销情况。
5. 商家查看核销明细列表，了解每一笔核销记录的具体情况。

**扩展场景：**

- **2a. 当前时段无核销数据：**
  1. 系统显示“暂无核销数据”的友好提示，并鼓励商家积极推广。